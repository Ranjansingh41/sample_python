language: python

python:
  # - 2.6
  - 2.7
  # - 3.2
  # - 3.3
  # - 3.4
  # - pypy

env:
  # local
  # - secure: DLvrEza9Zr06DN6H8ukWdlnfoYbDTEsyenVmfJMD9OxdLatriAKfgCj385FhyXrLQf1dqZzks9FsM80wZElFjFmZGzqPF2919ZVA3AK/g9QFmDwrYuqGj3um1FcTTGqzErGHbJbwiNC5qeqyQRa7i3LNgofki1BfCz1d1zTTHEMs7oncVGH34E8RULGBkTtpQk/c8ihT3pvYt0+FVsIi9Qd+E4epuy17aqbJtV+YzIZFfVqOYu5HNstNSK8C0HSQKGfCbOTUH0UdL3xPH1MdcDoxrqX6I9bNJSKa/tV0ayIdbcfCdPsprGVQwq/r+nk+lVIxTc7DNeWKDdYRBipOgg==
  # beta
  # - secure: SVfS/y817e0iXi+9ibr6dxQisUcoehtKjRhd+gCFlFFUFHxQvQRI4NviZDDuxG79XzJi2op+AXqiLbOMKYajh9edf9fRK5RcptIdD69oT/6UOmmK3sp8uiiekY9RtQD2+AVMSe6HeRk5LRNcAsF9PVH7YXVcZPdkfPLFtDCXzKxh0U4/YngUsyOIpns+CBrmm4ZjwjNqS9pqZtQathF4GXv3aDWB/SW0y9Xd1nCb5NZQubMIRVO6DWL0dJXJ9jtOGsLBmo9mjCosnaoVVNBQjm7bt7RzuvbvK+juQo80/R8RRbnmDSRgEVsv438zyt+dbU/jAYcZY8iy/OmEBxuuIg==
  - MY_ENV=thereallycoolvar MY_ENV2=shazam!
install:
  - pip install -r requirements.txt

# Make folders for the reports
before_script:
  - mkdir -p shippable/testresults
  - mkdir -p shippable/codecoverage

script:
  - echo 'here comes the secret!'
  - echo $SECRET
  - nosetests test.py --with-xunit --xunit-file=shippable/testresults/nosetests.xml
  - which python && coverage run --branch test.py
  - which python && coverage xml -o shippable/codecoverage/coverage.xml test.py

notifications:
  email:
   - exampleone@org.com
