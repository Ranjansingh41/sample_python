language: python
#set language version. This is only required if you use the default Shippable image for your build
python:
    - 2.7

build:
    pre_ci_boot:
        options: -v /data
    post_ci:
      - docker rm -f postgres  &> /dev/null || true
      - cp $SHIPPABLE_BUILD_DIR/README.md /data/README.md
      - touch /data/startup.sh
      - echo '#! /bin/bash' > /data/startup.sh
      - echo 'sudo apt-get install tree' > /data/startup.sh
      - echo 'tree' > /data/startup.sh
      - echo $CONTAINER_NAME
      - echo $SHIPPABLE_CONTAINER_NAME
      - docker run -i --name postgres --publish 5432:5432 --volumes-from $SHIPPABLE_CONTAINER_NAME postgres /data/startup.sh
      - ls -la
      - sudo apt-get install tree
      - tree
      - docker ps
      - docker stop -t=0 fd441ff9a7e6 675ad55a1808
      - docker ps
      - ls -al
      - cat ./docker-entrypoint.sh
    on_failure:
      - docker logs --tail="all" gunicorn
