language: python
#set language version. This is only required if you use the default Shippable image for your build
python:
    - 2.7
env:
  - LIVELY_REPO_DIR=/root/src/github.com/stephanielingwood/sample_python
build:
    post_ci:
      - echo $LIVELY_REPO_DIR
      - ls -la $LIVELY_REPO_DIR
      - mkdir $LIVELY_REPO_DIR/deploy
      - mkdir $LIVELY_REPO_DIR/deploy/docker
      - mkdir $LIVELY_REPO_DIR/deploy/docker/containers
      - mkdir $LIVELY_REPO_DIR/deploy/docker/containers/postgres
      - touch $LIVELY_REPO_DIR/deploy/docker/containers/postgres/docker-entrypoint.sh
      - echo "test string" > $LIVELY_REPO_DIR/deploy/docker/containers/postgres/docker-entrypoint.sh
      - cat $LIVELY_REPO_DIR/deploy/docker/containers/postgres/docker-entrypoint.sh
      - docker rm -f postgres  &> /dev/null || true
      - docker run postgres
      - docker ps
      -ls -la
      - cat ./docker-entrypoint.sh
    on_failure:
      - docker logs --tail="all" gunicorn
