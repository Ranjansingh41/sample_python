language: python
#set language version. This is only required if you use the default Shippable image for your build
python:
    - 2.7

build:
    pre_ci_boot:
        options: -v /dataDir
    post_ci:
      - docker rm -f postgres  &> /dev/null || true
      - cp $SHIPPABLE_BUILD_DIR/README.md /data/README.md
      - touch /dataDir/startup.sh
      - echo '#! /bin/bash' >> /dataDir/entrypoint.sh
      - echo 'ls -la /' >> /dataDir/entrypoint.sh
      - echo 'ls -la /data' >> /dataDir/entrypoint.sh
      - chmod +x /data/startup.sh
      - docker run -i --name postgres --publish 5432:5432 --volumes-from $SHIPPABLE_CONTAINER_NAME postgres /data/entrypoint.sh
      - docker ps
      - docker stop -t=0 postgres
      - docker ps
